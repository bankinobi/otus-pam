# otus-pam
## Запретить всем пользователям, кроме группы admin, логин в выходные (суббота и воскресенье), без учета праздников

* Запрет логина по выходным дням реализован при помощи PAM-модуля pam_script
* Скрипт проверяет день недели (Sat|Sun)
* Далее проверяет принадлежность пользователя к группе **admin**
* Если все условия выполняются успешно, авторизация разрешена
* Пользователь vagrant является членом группы admin, поэтому ему аутентификация на сервере разрешена
* Пользователь otus не в группе admin

Для проверки выполнить 

    vagrant up && vagrant ssh otus-pam-0
    su otus ## пароль vagrant
    ssh 192.168.50.11

Аутентификация завершится с ошибкой
    
    Authentication failed.

На втором хосте(otus-pam-1) в логе /var/log/secure должна появится следующая запись

    fatal: Access denied for user otus by PAM account configuration [preauth]



## Дать конкретному пользователю права работать с докером и возможность рестартить докер сервис

* Права на работу с консольной утилитой docker выданы пользователю **otus**, для этого пользователь был добавлен в группу docker
* Возможность работать с systemd юнитом docker реализована с помощью PolicyKit правила, добавленного в директорию /etc/polkit-1/rules.d/

Для проверки, от имени пользователя otus запустить демон докера

    systemctl start docker

От имени пользователя vagrant та же операция вызовет ошибку
